<!DOCTYPE html>
<html>
<head>
	<title>Falling Block Game</title>
	<style>
		.row {
			display: flex;
		}
		.block {
			width: 50px;
			height: 50px;
			border: 1px solid black;
		}
	</style>
</head>
<body>
	<div id="gameContainer">
		<!-- game board will be generated here -->
	</div>
	<script>
		const gameContainer = document.getElementById("gameContainer");
		const rows = 10;
		const cols = 10;
    		// create game board
	for (let i = 0; i < rows; i++) {
		let row = document.createElement("div");
		row.classList.add("row");
		for (let j = 0; j < cols; j++) {
			let block = document.createElement("div");
			block.classList.add("block");
			row.appendChild(block);
		}
		gameContainer.appendChild(row);
	}

	// generate random colors for blocks
	const colors = ["red", "orange", "yellow", "green", "blue", "purple"];
	const blocks = document.querySelectorAll(".block");
	blocks.forEach(block => {
		block.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
	});

	// check for matching blocks
	function checkForMatches() {
		blocks.forEach(block => {
			let blockColor = block.style.backgroundColor;
			let row = block.parentNode;
			let col = Array.from(row.children).indexOf(block);
			let numHorizontalMatches = 0;
			let numVerticalMatches = 0;
			let blocksToRemove = [];

			// check for horizontal matches
			let i = col;
			while (i < cols && row.children[i].style.backgroundColor === blockColor) {
				numHorizontalMatches++;
				i++;
			}
			i = col - 1;
			while (i >= 0 && row.children[i].style.backgroundColor === blockColor) {
				numHorizontalMatches++;
				i--;
			}

			// check for vertical matches
			let j = Array.from(gameContainer.children).indexOf(row);
			while (j < rows && gameContainer.children[j].children[col].style.backgroundColor === blockColor) {
				numVerticalMatches++;
				j++;
			}
			j = Array.from(gameContainer.children).indexOf(row) - 1;
			while (j >= 0 && gameContainer.children[j].children[col].style.backgroundColor === blockColor) {
				numVerticalMatches++;
				j--;
			}

			// remove blocks if 3 or more matches found
			if (numHorizontalMatches >= 3) {
				for (let k = col - numHorizontalMatches + 1; k <= col; k++) {
					blocksToRemove.push(row.children[k]);
				}
			}
			if (numVerticalMatches >= 3) {
				for (let k = Array.from(gameContainer.children).indexOf(row) - numVerticalMatches + 1; k <= Array.from(gameContainer.children).indexOf(row); k++) {
					blocksToRemove.push(gameContainer.children[k].children[col]);
				}
			}

			// move blocks down
			blocksToRemove.forEach(block => {
				block.style.backgroundColor = "white";
				let currentRow = block.parentNode;
				let currentCol = Array.from(currentRow.children).indexOf(block);
				let nextRow = gameContainer.children[Array.from(gameContainer.children).indexOf(currentRow) + 1];
				if (nextRow) {
					nextRow.children[currentCol].style.backgroundColor = blockColor;
				}
			});
		});
	}

	setInterval(checkForMatches, 1000);
</script>
  </body>
</html>
